{"openapi":"3.0.0","info":{"title":"Authorization Service","description":"Esse serviço é utilizado para autenticação de usuários (Password Credentials) e serviços (Client Credentials).","version":"1.0.0","contact":{"name":"Fernando Tomio - Nimbus House","email":"fernando.tomio@nimbus.house"}},"tags":[{"name":"Authorization"}],"paths":{"/v2/auth/health":{"get":{"tags":["Health Check"],"summary":"Check Server Health","responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/schemas/healthCheck"}}}}}}},"/v2/auth/":{"post":{"tags":["SignIn"],"summary":"User authentication","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/schemas/signInInput"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/schemas/signInOutput"}}}},"400":{"$ref":"#/components/badRequest"},"401":{"$ref":"#/components/unauthorized"},"500":{"$ref":"#/components/serverError"}}}},"/v2/auth/validate":{"post":{"tags":["Validate Access Token"],"summary":"Access token validation","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/schemas/validatePasswordTokenInput"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/schemas/validatePasswordTokenOutput"}}}},"400":{"$ref":"#/components/badRequest"},"401":{"$ref":"#/components/unauthorized"},"500":{"$ref":"#/components/serverError"}}}},"/v2/otp/":{"post":{"tags":["Send OTP Token"],"summary":"Send OTP Token","parameters":[{"name":"Authorization","in":"header","description":"Authorization Token","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/schemas/sendOtpTokenInput"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/schemas/sendOtpTokenOutput"}}}},"400":{"$ref":"#/components/badRequest"},"401":{"$ref":"#/components/unauthorized"},"500":{"$ref":"#/components/serverError"}}}},"/v2/otp/validate":{"post":{"tags":["Validate OTP Token"],"summary":"Validate OTP Token","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/schemas/validateOtpTokenInput"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/schemas/validateOtpTokenOutput"}}}},"400":{"$ref":"#/components/badRequest"},"401":{"$ref":"#/components/unauthorized"},"500":{"$ref":"#/components/serverError"}}}},"/v2/auth/api/":{"post":{"tags":["Login Client Credentials (Machine to machine)"],"summary":"Login Client Credentials (Machine to machine)","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/schemas/loginClientInput"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/schemas/loginClientOutput"}}}},"400":{"$ref":"#/components/badRequest"},"401":{"$ref":"#/components/unauthorized"},"500":{"$ref":"#/components/serverError"}}}},"/v2/auth/api/validate":{"post":{"tags":["Validate Client Credentials Token (Machine to machine)"],"summary":"Validate Client Credentials Token (Machine to machine)","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/schemas/validateClientTokenInput"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/schemas/validateClientTokenOutput"}}}},"400":{"$ref":"#/components/badRequest"},"401":{"$ref":"#/components/unauthorized"},"500":{"$ref":"#/components/serverError"}}}},"/v2/auth/sms":{"post":{"tags":["Send SMS"],"summary":"Send SMS","parameters":[{"name":"Authorization","in":"header","description":"API Authorization Token","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/schemas/sendSmsInput"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/schemas/sendSmsOutput"}}}},"400":{"$ref":"#/components/badRequest"},"401":{"$ref":"#/components/unauthorized"},"403":{"$ref":"#/components/forbidden"},"500":{"$ref":"#/components/serverError"}}}},"/authorizationserver/oauth2/clientcredentials/token":{"post":{"tags":["Login Client Credentials (Alias)"],"summary":"Login Client Credentials (Alias)","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/schemas/loginClientInput"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/schemas/loginClientOutput"}}}},"400":{"$ref":"#/components/badRequest"},"401":{"$ref":"#/components/unauthorized"},"500":{"$ref":"#/components/serverError"}}}},"/authorizationserver/clientcredentials/token":{"post":{"tags":["Login Client Credentials (Alias)"],"summary":"Login Client Credentials (Alias)","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/schemas/loginClientInput"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/schemas/tokenOutput"}}}},"400":{"$ref":"#/components/badRequest"},"401":{"$ref":"#/components/unauthorized"},"500":{"$ref":"#/components/serverError"}}}},"/authorizationserver/clientcredentials/validate":{"post":{"tags":["Validate Client Credentials Token (Machine to machine) (Alias)"],"summary":"Validate Client Credentials Token (Machine to machine)  (Alias)","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/schemas/validateClientTokenInput"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/schemas/tokenOutput"}}}},"400":{"$ref":"#/components/badRequest"},"401":{"$ref":"#/components/unauthorized"},"500":{"$ref":"#/components/serverError"}}}},"/legacy/oauth2/token":{"post":{"tags":["Login Client Credentials (Alias Legacy)"],"summary":"Login Client Credentials (Alias Legacy)","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/schemas/loginClientInput"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/schemas/loginClientOutput"}}}},"400":{"$ref":"#/components/badRequest"},"401":{"$ref":"#/components/unauthorized"},"500":{"$ref":"#/components/serverError"}}}},"/client/validate":{"post":{"tags":["Validação de Credenciais, Scope & App do ClientCredentials (Legado)"],"summary":"Validação de Credenciais, Scope & App do ClientCredentials (Legado)","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/schemas/validateClientInput"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/schemas/validateClientOutput"}}}},"400":{"$ref":"#/components/badRequest"},"401":{"$ref":"#/components/unauthorized"},"500":{"$ref":"#/components/serverError"}}}},"/credentials/validate":{"post":{"tags":["Validação de Credenciais, Scope & App do ClientCredentials (Legado)"],"summary":"Validação de Credenciais, Scope & App do ClientCredentials (Legado)","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/schemas/validateClientInput"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/schemas/validateClientOutput"}}}},"400":{"$ref":"#/components/badRequest"},"401":{"$ref":"#/components/unauthorized"},"500":{"$ref":"#/components/serverError"}}}},"/authorizationserver/oauth2/password/tokendigital":{"post":{"tags":["Login Password Credentials (Alias)"],"summary":"User authentication (Substitute alias to PasswordCredentials)","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/schemas/loginPasswordInput"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/schemas/loginPasswordOutput"}}}},"400":{"$ref":"#/components/badRequest"},"401":{"$ref":"#/components/unauthorized"},"500":{"$ref":"#/components/serverError"}}}},"/authorizationserver/digital/token":{"post":{"tags":["Login Password Credentials (Alias)"],"summary":"User authentication (Substitute alias to PasswordCredentials)","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/schemas/loginPasswordInput"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/schemas/tokenOutput"}}}},"400":{"$ref":"#/components/badRequest"},"401":{"$ref":"#/components/unauthorized"},"500":{"$ref":"#/components/serverError"}}}},"/authorizationserver/digital/validate":{"post":{"tags":["Validate Password Credentials Token  (Alias)"],"summary":"Validate Password Credentials Token  (Alias)","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/schemas/validatePasswordTokenInput"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/schemas/tokenOutput"}}}},"400":{"$ref":"#/components/badRequest"},"401":{"$ref":"#/components/unauthorized"},"500":{"$ref":"#/components/serverError"}}}}},"schemas":{"error":{"type":"object","properties":{"error":{"type":"string"}}},"healthCheck":{"type":"object","properties":{"status":{"type":"string"}}},"signInInput":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}},"required":["username","password"]},"signInOutput":{"type":"object","properties":{"access_token":{"type":"string","description":"The access token string issued by the authorization server."},"token_type":{"type":"string","description":"The type of the access token."},"expires_in":{"type":"integer","description":"The duration of time the access token is granted for."}}},"validateTokenOutput":{"type":"boolean"},"loginPasswordInput":{"type":"object","properties":{"username":{"type":"string"},"secret":{"type":"string"}},"required":["username","secret"]},"loginPasswordOutput":{"type":"object","properties":{"access_token":{"type":"string","description":"The access token string issued by the authorization server."},"token_type":{"type":"string","description":"The type of the access token."},"expires_in":{"type":"integer","description":"The duration of time the access token is granted for."}}},"sendOtpTokenInput":{"type":"object","properties":{"source":{"type":"string","description":"Options: fenix and auth0."},"method":{"type":"string","description":"Options: sms and email."},"userId":{"type":"string","description":"Required if source is fenix."},"transactionId":{"type":"string","description":"Optional if source is fenix."},"fenixToken":{"type":"string","description":"Required if source is fenix. You need to provide an access token generated from Fênix API (Path: /v1/auth/token)."}},"required":["source","method"]},"sendOtpTokenOutput":{"type":"object","properties":{"contact":{"type":"string","description":"Save this information. It will be required to validate the received token."},"otpTokenId":{"type":"string","nullable":true,"description":"If your source is fenix then you need to save this information to validate the received token."}}},"validateOtpTokenInput":{"type":"object","properties":{"source":{"type":"string","description":"Options: fenix and auth0."},"method":{"type":"string","description":"Options: sms and email."},"token":{"type":"string","description":"Received token."},"email":{"type":"string","description":"It is required if you send the token using method email."},"phoneNumber":{"type":"string","description":"It is required if you send the token using method sms."},"tokenId":{"type":"string","description":"It is required if you send the token using source fenix."},"fenixToken":{"type":"string","description":"It is required if you send the token using source fenix. You need to provide an access token generated from Fênix API (Path: /v1/auth/token)."}},"required":["source","method","token"]},"validateOtpTokenOutput":{"type":"boolean"},"loginClientInput":{"type":"object","properties":{"client_id":{"type":"string"},"client_secret":{"type":"string"}},"required":["client_id","client_secret"]},"loginClientOutput":{"type":"object","properties":{"access_token":{"type":"string","description":"The access token string issued by the authorization server."},"token_type":{"type":"string","description":"The type of the access token."},"expires_in":{"type":"integer","description":"The duration of time the access token is granted for."}}},"validateClientInput":{"type":"object","properties":{"client_id":{"type":"string"},"client_secret":{"type":"string"},"scope":{"type":"string"},"application":{"type":"string"}},"required":["client_id","client_secret","scope","application"]},"validateClientOutput":{"type":"object","properties":{"status":{"type":"boolean"},"json":{"type":"object","properties":{"status":{"type":"boolean"}}}}},"validatePasswordTokenOutput":{"type":"object","properties":{"status":{"type":"boolean"},"token":{"type":"string"},"userName":{"type":"string"},"audience":{"type":"string"},"expires":{"type":"integer"}}},"sendSmsInput":{"type":"object","properties":{"recipient":{"type":"string"},"body":{"type":"string"},"sender":{"type":"string"}},"required":["recipient","body"]},"sendSmsOutput":{"type":"boolean"},"validateClientTokenInput":{"type":"object","properties":{"token":{"type":"string"},"resource":{"type":"string"}}},"validateClientTokenOutput":{"type":"object","properties":{"status":{"type":"boolean"},"token":{"type":"string"},"clientId":{"type":"string"},"audience":{"type":"string"},"expires":{"type":"integer"}}},"validatePasswordTokenInput":{"type":"object","properties":{"token":{"type":"string"},"resource":{"type":"string"}}},"tokenOutput":{"type":"object","properties":{"status":{"type":"boolean","description":"The status if token is valid or not."},"json":{"type":"string","description":"The stringified access token payload."}}}},"components":{"badRequest":{"description":"Invalid request","content":{"application/json":{"schema":{"$ref":"#/schemas/error"}}}},"serverError":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/schemas/error"}}}},"unauthorized":{"description":"Invalid credentials","content":{"application/json":{"schema":{"$ref":"#/schemas/error"}}}},"forbidden":{"description":"Access denied","content":{"application/json":{"schema":{"$ref":"#/schemas/error"}}}}}}
